<section *ngIf="activeCategories.length > 0" class="categories full-width-container overflow-hidden">
  <!-- Slider Layout for 4+ categories -->
  <div *ngIf="activeCategories.length > 3; else staticLayout" class="position-relative">
    <div class="row gx-3">
      <div class="col-md-3" *ngFor="let category of visibleCategories">
        <div class="cat-item image-zoom-effect position-relative w-100 h-100">
          <div class="image-holder">
            <a [routerLink]="['/shop']" [queryParams]="{ category: category.name }">
              <img [src]="category.imageUrl" alt="category image" class="product-image img-fluid w-100" />
            </a>
            <div class="category-content text-uppercase">
              <h4 class="text-white">{{ category.name }}</h4>
              <a [routerLink]="['/shop']" class="text-white btn-link">Shop it Now</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="icon-arrow icon-arrow-left" (click)="prevSlide()">
      <mat-icon>chevron_left</mat-icon>
    </div>
    <div class="icon-arrow icon-arrow-right" (click)="nextSlide()">
      <mat-icon>chevron_right</mat-icon>
    </div>
  </div>

  <!-- Static layout for 1â€“3 categories -->
  <ng-template #staticLayout>
    <div class="row d-flex flex-wrap justify-content-center">
      <div
        *ngFor="let category of activeCategories"
        [ngClass]="{
          'col-md-4': activeCategories.length === 3,
          'col-md-6': activeCategories.length === 2,
          'col-md-12': activeCategories.length === 1
        }"
        class="col-sm-12 mb-3"
      >
        <div class="cat-item image-zoom-effect position-relative w-100 h-100">
          <div class="image-holder">
            <a [routerLink]="['/shop']" [queryParams]="{ category: category.name }">
              <img [src]="category.imageUrl" alt="category image" class="product-image img-fluid w-100" />
            </a>
            <div class="category-content text-uppercase">
              <h4 class="text-white">{{ category.name }}</h4>
              <a [routerLink]="['/shop']" class="text-white btn-link">Shop it Now</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
</section>
