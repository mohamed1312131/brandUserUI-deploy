<section class="py-5">
  
</section>

<section class="checkout-wrap pb-5">
  <div class="container">
    <form class="form-group" [formGroup]="checkoutForm" (ngSubmit)="submitOrder()">
      <div class="row g-5">

        <!-- Billing Details -->
        <div class="col-lg-6">
          <h4 class="text-dark pb-4">Billing Details</h4>
          <div class="billing-details">
            <label for="fname">First Name*</label>
            <input type="text" id="fname" class="form-control mt-2 mb-1 ps-3" formControlName="firstName">
            <div *ngIf="checkoutForm.get('firstName')?.touched && checkoutForm.get('firstName')?.invalid" class="text-danger mb-3">First name is required.</div>

            <label for="lname">Last Name*</label>
            <input type="text" id="lname" class="form-control mt-2 mb-1 ps-3" formControlName="lastName">
            <div *ngIf="checkoutForm.get('lastName')?.touched && checkoutForm.get('lastName')?.invalid" class="text-danger mb-3">Last name is required.</div>

            <label for="region">Governorate / Region*</label>
            <select id="region" class="form-select form-control mt-2 mb-1" formControlName="region">
              <option value="" disabled selected hidden>Select your region</option>
              <option value="Ariana">Ariana</option>
              <option value="Béja">Béja</option>
              <option value="Ben Arous">Ben Arous</option>
              <option value="Bizerte">Bizerte</option>
              <option value="Gabès">Gabès</option>
              <option value="Gafsa">Gafsa</option>
              <option value="Jendouba">Jendouba</option>
              <option value="Kairouan">Kairouan</option>
              <option value="Kasserine">Kasserine</option>
              <option value="Kebili">Kebili</option>
              <option value="Kef">Kef</option>
              <option value="Mahdia">Mahdia</option>
              <option value="Manouba">Manouba</option>
              <option value="Medenine">Medenine</option>
              <option value="Monastir">Monastir</option>
              <option value="Nabeul">Nabeul</option>
              <option value="Sfax">Sfax</option>
              <option value="Sidi Bouzid">Sidi Bouzid</option>
              <option value="Siliana">Siliana</option>
              <option value="Sousse">Sousse</option>
              <option value="Tataouine">Tataouine</option>
              <option value="Tozeur">Tozeur</option>
              <option value="Tunis">Tunis</option>
              <option value="Zaghouan">Zaghouan</option>
            </select>
            <div *ngIf="checkoutForm.get('region')?.touched && checkoutForm.get('region')?.invalid" class="text-danger mb-3">
              Region is required.
            </div>

            <label for="address">Address*</label>
            <input type="text" id="address" class="form-control mt-2 mb-1 ps-3" formControlName="address">
            <div *ngIf="checkoutForm.get('address')?.touched && checkoutForm.get('address')?.invalid" class="text-danger mb-3">Address is required.</div>

            <label for="city">City*</label>
            <input type="text" id="city" class="form-control mt-2 mb-1 ps-3" formControlName="city">
            <div *ngIf="checkoutForm.get('city')?.touched && checkoutForm.get('city')?.invalid" class="text-danger mb-3">City is required.</div>

            <label for="state">Governorate / State*</label>
            <input type="text" id="state" class="form-control mt-2 mb-1 ps-3" formControlName="state">
            <div *ngIf="checkoutForm.get('state')?.touched && checkoutForm.get('state')?.invalid" class="text-danger mb-3">Governorate is required.</div>

            <label for="zipCode">Postal Code*</label>
            <input type="text" id="zipCode" class="form-control mt-2 mb-1 ps-3" formControlName="zipCode">
            <div *ngIf="checkoutForm.get('zipCode')?.touched && checkoutForm.get('zipCode')?.invalid" class="text-danger mb-3">Postal code is required.</div>

            <label for="phone">Phone*</label>
            <input type="text" id="phone" class="form-control mt-2 mb-1 ps-3" formControlName="phone">
            <div *ngIf="checkoutForm.get('phone')?.touched && checkoutForm.get('phone')?.invalid" class="text-danger mb-3">Invalid phone number (8 digits).</div>

            <label for="email">Email Address*</label>
            <input type="email" id="email" class="form-control mt-2 mb-1 ps-3" formControlName="email">
            <div *ngIf="checkoutForm.get('email')?.touched && checkoutForm.get('email')?.invalid" class="text-danger mb-3">Invalid email address.</div>
          </div>
        </div>

        <!-- Additional Information -->
        <div class="col-lg-6">
          <h4 class="text-dark pb-4">Additional Information</h4>
          <div class="billing-details">
            <label for="note">Order Notes (optional)</label>
            <textarea id="note" class="form-control pt-3 pb-3 ps-3 mt-2" placeholder="Notes about your order..." formControlName="note"></textarea>
          </div>

          <!-- Cart Summary -->
          <div class="your-order mt-5">
            <h4 class="display-7 text-dark pb-4">Cart Summary</h4>
            <div class="total-price">
              <table cellspacing="0" class="table">
                <tbody>
                  <tr class="subtotal border-top border-bottom pt-2 pb-2 text-uppercase">
                    <th>Subtotal</th>
                    <td>
                      <span class="price-amount amount ps-5">
                        <bdi><span class="price-currency-symbol">DT</span>{{ getTotal().toFixed(2) }}</bdi>
                      </span>
                    </td>
                  </tr>
                  <tr class="order-total border-bottom pt-2 pb-2 text-uppercase">
                    <th>Total + Shipping</th>
                    <td>
                      <span class="price-amount amount ps-5">
                        <bdi><span class="price-currency-symbol">DT</span>{{ getGrandTotal().toFixed(2) }}</bdi>
                      </span>
                    </td>
                  </tr>
                </tbody>
              </table>

              <!-- Submit Button -->
              <button
                type="submit"
                class="btn w-100 text-white"
                style="background-color: #28a745;"
                [disabled]="checkoutForm.invalid || isSubmitting">
                {{ isSubmitting ? 'Placing Order...' : 'Place Order' }}
              </button>

            </div>
          </div>
        </div>

      </div>
    </form>
  </div>
</section>
